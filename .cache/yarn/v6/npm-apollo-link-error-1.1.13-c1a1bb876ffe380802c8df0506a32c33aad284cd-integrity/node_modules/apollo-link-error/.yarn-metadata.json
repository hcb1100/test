{
  "manifest": {
    "name": "apollo-link-error",
    "version": "1.1.13",
    "description": "Error Apollo Link for GraphQL Network Stack",
    "author": {
      "name": "James Baxley",
      "email": "james@meteor.com"
    },
    "license": "MIT",
    "main": "./lib/index.js",
    "module": "./lib/bundle.esm.js",
    "typings": "./lib/index.d.ts",
    "sideEffects": false,
    "repository": {
      "type": "git",
      "url": "git+https://github.com/apollographql/apollo-link.git"
    },
    "bugs": {
      "url": "https://github.com/apollographql/apollo-link/issues"
    },
    "homepage": "https://github.com/apollographql/apollo-link#readme",
    "scripts": {
      "build": "tsc && rollup -c",
      "clean": "rimraf lib/* && rimraf coverage/*",
      "coverage": "jest --coverage",
      "filesize": "../../scripts/minify",
      "lint": "tslint -c \"../../tslint.json\" -p tsconfig.json -c ../../tslint.json src/*.ts",
      "prebuild": "npm run clean",
      "prepare": "npm run build",
      "test": "npm run lint && jest",
      "watch": "tsc -w -p . & rollup -c -w"
    },
    "dependencies": {
      "apollo-link": "^1.2.14",
      "apollo-link-http-common": "^0.2.16",
      "tslib": "^1.9.3"
    },
    "devDependencies": {
      "@types/graphql": "14.2.3",
      "@types/jest": "24.9.0",
      "graphql": "15.0.0",
      "graphql-tag": "2.10.1",
      "jest": "24.9.0",
      "rimraf": "2.7.1",
      "rollup": "1.29.1",
      "ts-jest": "22.4.6",
      "tslint": "5.20.1",
      "typescript": "3.0.3"
    },
    "jest": {
      "transform": {
        ".(ts|tsx)": "ts-jest"
      },
      "testRegex": "(/__tests__/.*|\\.(test|spec))\\.(ts|tsx|js)$",
      "moduleFileExtensions": [
        "ts",
        "tsx",
        "js",
        "json"
      ],
      "testURL": "http://localhost"
    },
    "gitHead": "1012934b4fd9ab436c4fdcd5e9b1bb1e4c1b0d98",
    "_registry": "npm",
    "_loc": "/home/tel/.cache/yarn/v6/npm-apollo-link-error-1.1.13-c1a1bb876ffe380802c8df0506a32c33aad284cd-integrity/node_modules/apollo-link-error/package.json",
    "readmeFilename": "README.md",
    "readme": "---\ntitle: apollo-link-error\ndescription: Handle and inspect errors in your GraphQL network stack.\n---\n\nUse this link to do some custom logic when a GraphQL or network error happens:\n\n```js\nimport { onError } from \"apollo-link-error\";\n\nconst link = onError(({ graphQLErrors, networkError }) => {\n  if (graphQLErrors)\n    graphQLErrors.forEach(({ message, locations, path }) =>\n      console.log(\n        `[GraphQL error]: Message: ${message}, Location: ${locations}, Path: ${path}`\n      )\n    );\n  if (networkError) console.log(`[Network error]: ${networkError}`);\n});\n```\n\nApollo Link is a system of modular components for GraphQL networking. [Read the docs](https://www.apollographql.com/docs/link/#usage) to learn how to use this link with libraries like Apollo Client and graphql-tools, or as a standalone client.\n\n## Callback\n\nError Link takes a function that is called in the event of an error. This function is called with an object containing the following keys:\n\n* `operation`: The Operation that errored\n* `response`: The result returned from lower down in the link chain\n* `graphQLErrors`: An array of errors from the GraphQL endpoint\n* `networkError`: Any error during the link execution or server response, that wasn't delivered as part of the `errors` field in the GraphQL result\n* `forward`: A reference to the next link in the chain. Calling `return forward(operation)` in the callback will retry the request, returning a new observable for the upstream link to subscribe to.\n\nReturns: `Observable<FetchResult> | void` The error callback can optionally return an observable from calling `forward(operation)` if it wants to retry the request. It should not return anything else.\n\n## Error categorization\n\nAn error is passed as a `networkError` if a link further down the chain called the `error` callback on the observable. In most cases, `graphQLErrors` is the `errors` field of the result from the last `next` call.\n\nA `networkError` can contain additional fields, such as a GraphQL object in the case of a [failing HTTP status code](http#errors) from [`apollo-link-http`](http). In this situation, `graphQLErrors` is an alias for `networkError.result.errors` if the property exists.\n\n## Retrying failed requests\n\nAn error handler might want to do more than just logging errors. You can check for a certain failure condition or error code, and retry the request if rectifying the error is possible. For example, when using some form of token based authentication, there is a need to handle re-authentication when the token expires. Here is an example of how to do this using `forward()`.\n```js\nonError(({ graphQLErrors, networkError, operation, forward }) => {\n    if (graphQLErrors) {\n      for (let err of graphQLErrors) {\n        switch (err.extensions.code) {\n          case 'UNAUTHENTICATED':\n            // error code is set to UNAUTHENTICATED\n            // when AuthenticationError thrown in resolver\n\n            // modify the operation context with a new token\n            const oldHeaders = operation.getContext().headers;\n            operation.setContext({\n              headers: {\n                ...oldHeaders,\n                authorization: getNewToken(),\n              },\n            });\n            // retry the request, returning the new observable\n            return forward(operation);\n        }\n      }\n    }\n    if (networkError) {\n      console.log(`[Network error]: ${networkError}`);\n      // if you would also like to retry automatically on\n      // network errors, we recommend that you use\n      // apollo-link-retry\n    }\n  }\n);\n```\n\nHere is a diagram of how the request flow looks like now:\n![Diagram of request flow after retrying in error links](https://i.imgur.com/ncVAdz4.png)\n\nOne caveat is that the errors from the new response from retrying the request does not get passed into the error handler again. This helps to avoid being trapped in an endless request loop when you call forward() in your error handler.\n\n## Ignoring errors\n\nIf you want to conditionally ignore errors, you can set `response.errors = undefined;` within the error handler:\n\n```js\nonError(({ response, operation }) => {\n  if (operation.operationName === \"IgnoreErrorsQuery\") {\n    response.errors = undefined;\n  }\n});\n```\n",
    "licenseText": "The MIT License (MIT)\n\nCopyright (c) 2016 - 2017 Meteor Development Group, Inc.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n"
  },
  "artifacts": [],
  "remote": {
    "resolved": "https://registry.yarnpkg.com/apollo-link-error/-/apollo-link-error-1.1.13.tgz#c1a1bb876ffe380802c8df0506a32c33aad284cd",
    "type": "tarball",
    "reference": "https://registry.yarnpkg.com/apollo-link-error/-/apollo-link-error-1.1.13.tgz",
    "hash": "c1a1bb876ffe380802c8df0506a32c33aad284cd",
    "integrity": "sha512-jAZOOahJU6bwSqb2ZyskEK1XdgUY9nkmeclCrW7Gddh1uasHVqmoYc4CKdb0/H0Y1J9lvaXKle2Wsw/Zx1AyUg==",
    "registry": "npm",
    "packageName": "apollo-link-error",
    "cacheIntegrity": "sha512-jAZOOahJU6bwSqb2ZyskEK1XdgUY9nkmeclCrW7Gddh1uasHVqmoYc4CKdb0/H0Y1J9lvaXKle2Wsw/Zx1AyUg== sha1-waG7h2/+OAgCyN8FBqMsM6rShM0="
  },
  "registry": "npm",
  "hash": "c1a1bb876ffe380802c8df0506a32c33aad284cd"
}