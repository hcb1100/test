{
  "manifest": {
    "name": "apollo-cache-control",
    "version": "0.11.0",
    "description": "A GraphQL extension for cache control",
    "main": "./dist/index.js",
    "types": "./dist/index.d.ts",
    "license": "MIT",
    "repository": {
      "type": "git",
      "url": "https://github.com/apollographql/apollo-cache-control-js.git"
    },
    "author": {
      "name": "Martijn Walraven",
      "email": "martijn@martijnwalraven.com"
    },
    "engines": {
      "node": ">=6.0"
    },
    "dependencies": {
      "apollo-server-env": "^2.4.4",
      "apollo-server-plugin-base": "^0.9.0"
    },
    "peerDependencies": {
      "graphql": "^0.12.0 || ^0.13.0 || ^14.0.0 || ^15.0.0"
    },
    "gitHead": "d159e320879f594ba2d04036e3e1aa0653ff164d",
    "_registry": "npm",
    "_loc": "/home/tel/.cache/yarn/v6/npm-apollo-cache-control-0.11.0-7075492d04c5424e7c6769380b503e8f75b39d61-integrity/node_modules/apollo-cache-control/package.json",
    "readmeFilename": "README.md",
    "readme": "# Apollo Cache Control (for Node.js)\n\nThis package is used to collect and expose cache control data in the [Apollo Cache Control](https://github.com/apollographql/apollo-cache-control) format.\n\nIt relies on instrumenting a GraphQL schema to collect cache control hints, and exposes cache control data for an individual request under `extensions` as part of the GraphQL response.\n\nThis data can be consumed by [Apollo Engine](https://www.apollographql.com/engine/) or any other tool to inform caching and visualize the cache policies that are in effect for a particular request.\n\n## Usage\n\n### Apollo Server\n\nApollo Server includes built-in support for Apollo Cache Control from version 1.2.0 onwards.\n\nThe only code change required is to add `tracing: true` and `cacheControl: true` to the options passed to the Apollo Server middleware function for your framework of choice. For example, for Express:\n\n```javascript\napp.use('/graphql', bodyParser.json(), graphqlExpress({\n  schema,\n  context: {},\n  tracing: true,\n  cacheControl: true\n}));\n```\n\n> If you are using `express-graphql`, we recommend you switch to Apollo Server. Both `express-graphql` and Apollo Server are based on the [`graphql-js`](https://github.com/graphql/graphql-js) reference implementation, and switching should only require changing a few lines of code.\n\n### Add cache hints to your schema\n\nCache hints can be added to your schema using directives on your types and fields. When executing your query, these hints will be added to the response and interpreted by Engine to compute a cache policy for the response. Hints on fields override hints specified on the target type.\n\n```graphql\ntype Post @cacheControl(maxAge: 240) {\n  id: Int!\n  title: String\n  author: Author\n  votes: Int @cacheControl(maxAge: 30)\n  readByCurrentUser: Boolean! @cacheControl(scope: PRIVATE)\n}\n```\n\nIf you need to add cache hints dynamically, you can use a programmatic API from within your resolvers.\n\n```javascript\nconst resolvers = {\n  Query: {\n    post: (_, { id }, _, { cacheControl }) => {\n      cacheControl.setCacheHint({ maxAge: 60 });\n      return find(posts, { id });\n    }\n  }\n}\n```\n\nIf you're using TypeScript, you need the following:\n```javascript\nimport 'apollo-cache-control';\n```\n\nIf set up correctly, for this query:\n\n```graphql\nquery {\n  post(id: 1) {\n    title\n    votes\n    readByCurrentUser\n  }\n}\n```\n\nYou should receive cache control data in the `extensions` field of your response:\n\n```json\n\"cacheControl\": {\n  \"version\": 1,\n  \"hints\": [\n    {\n      \"path\": [\n        \"post\"\n      ],\n      \"maxAge\": 240\n    },\n    {\n      \"path\": [\n        \"post\",\n        \"votes\"\n      ],\n      \"maxAge\": 30\n    },\n    {\n      \"path\": [\n        \"post\",\n        \"readByCurrentUser\"\n      ],\n      \"scope\": \"PRIVATE\"\n    }\n  ]\n}\n```\n\n### Setting a default maxAge\n\nThe power of cache hints comes from being able to set them precisely to different values on different types and fields based on your understanding of your implementation's semantics. But when getting started with Apollo Cache Control, you might just want to apply the same `maxAge` to most of your resolvers. You can specify a default max age when you set up `cacheControl` in your server. This max age will be applied to all resolvers which don't explicitly set `maxAge` via schema hints (including schema hints on the type that they return) or the programmatic API. You can override this for a particular resolver or type by setting `@cacheControl(maxAge: 0)`. For example, for Express:\n\n```javascript\napp.use('/graphql', bodyParser.json(), graphqlExpress({\n  schema,\n  context: {},\n  tracing: true,\n  cacheControl: {\n    defaultMaxAge: 5,\n  },\n}));\n```\n",
    "licenseText": "The MIT License (MIT)\n\nCopyright (c) 2016-2020 Meteor Development Group, Inc.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n"
  },
  "artifacts": [],
  "remote": {
    "resolved": "https://registry.yarnpkg.com/apollo-cache-control/-/apollo-cache-control-0.11.0.tgz#7075492d04c5424e7c6769380b503e8f75b39d61",
    "type": "tarball",
    "reference": "https://registry.yarnpkg.com/apollo-cache-control/-/apollo-cache-control-0.11.0.tgz",
    "hash": "7075492d04c5424e7c6769380b503e8f75b39d61",
    "integrity": "sha512-dmRnQ9AXGw2SHahVGLzB/p4UW/taFBAJxifxubp8hqY5p9qdlSu4MPRq8zvV2ULMYf50rBtZyC4C+dZLqmHuHQ==",
    "registry": "npm",
    "packageName": "apollo-cache-control",
    "cacheIntegrity": "sha512-dmRnQ9AXGw2SHahVGLzB/p4UW/taFBAJxifxubp8hqY5p9qdlSu4MPRq8zvV2ULMYf50rBtZyC4C+dZLqmHuHQ== sha1-cHVJLQTFQk58Z2k4C1A+j3WznWE="
  },
  "registry": "npm",
  "hash": "7075492d04c5424e7c6769380b503e8f75b39d61"
}